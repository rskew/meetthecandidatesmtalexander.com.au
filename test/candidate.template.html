<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>{{name}}</title>
    <meta name="description" content="{{name}} Answers">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="../favicon.png">
  </head>
  <style>
  @font-face { font-family: noto-sans; src: url('../NotoSans-Light.ttf'); }
  @font-face { font-family: noto-sans-medium; src: url('../NotoSans-Medium.ttf'); }
  html {
    font-family: noto-sans;
	  scroll-behavior: smooth;
  }
  body {
    background-color: #eee;
    font-size: 15px;
  }
  p {
    margin-bottom: 0px;
  }
  img {
    filter: grayscale(100%);
  }
  #everything-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 1000px;
  }
  .organisations-name {
    padding: 5px;
    margin: 5px;
    color: #833;
    text-decoration: none;
  }
  .organisations-name:hover {
    background-color: #f909;
    text-decoration: underline;
  }
  #questions-container {
    margin: 20px;
    max-width: 90vw;
  }
  #organisations {
    margin: 20px;
  }
  .answer {
    margin: 15px;
    margin-left: 30px;
    font-size: 16px;
    font-weight: 400;
  }
  #about {
    margin: 40px;
    margin-top: 20px;
    margin-bottom: 20px;
    font-size: 15px;
    max-width: 60vw;
  }
  @media (min-width: 1000px) {
    #questions-container {
      max-width: 60vw;
    }
    #about {
      max-width: 800px;
    }
  }
  .back {
    text-decoration: none;
    font-size: 12px;
  }
  .back:hover {
    background-color: #f909;
    text-decoration: underline;
  }
  #back-to-top {
    display: block;
  }
  #back-to-top.hidden {
    display: none;
  }
  .section {
    display: none;
  }
  .section.active {
    display: block;
  }
  .section_button {
    cursor: pointer;
    font-family: noto-sans-medium;
    font-size: 20px;
  }
  .section_button:hover {
    background-color: #f909;
    border-radius: 10px;
    user-select: none;
  }
  </style>
  <script>
    {{#has_answers}}
    window.onscroll = function (oEvent) {
      var mydivpos = document.getElementById("organisations").offsetTop;
      var scrollPos = window.scrollY;
      if(scrollPos >= mydivpos) {
        document.getElementById("back-to-top").classList.remove("hidden");
      } else {
        document.getElementById("back-to-top").classList.add("hidden");
      }
    };
    {{/has_answers}}

    window.addEventListener("load", function() {
      const sections = document.querySelectorAll('.section');
      let currentSection = 0;

      function updateSection() {
        sections.forEach((section, index) => {
          if (index === currentSection) {
            section.classList.add('active');
          } else {
            section.classList.remove('active');
          }
        });
      }

      document.getElementById('section_button_left').addEventListener('click', () => {
        currentSection = (currentSection - 1 + sections.length) % sections.length;
        updateSection();
      });

      document.getElementById('section_button_right').addEventListener('click', () => {
        currentSection = (currentSection + 1) % sections.length;
        updateSection();
      });
    })
  </script>
  <body style="display: flex; flex-direction: column; justify-content: center; align-items: center">
    <div onclick="history.back()" class="back" style="position: absolute; top: 10px; left: 10px; padding: 5px;">Back</div>
    <div onclick="window.scrollTo(0, 0)" id="back-to-top" class="back hidden" style="position: fixed; top: 10px; right: 10px; padding: 5px;">Back to Top</div>
    <img width="500px" src="../images/{{picture}}" style="border-radius: 30px; margin-top: 30px"/>
    <h1 style="font-weight: 400; margin: 15px">{{name}}</h1>
    <div style="font-weight: 400; font-size: 14px; margin: 10px; margin-top: 0px">Standing for {{ward}}{{#uncontested}} ({{uncontested}}){{/uncontested}}</div>
    <div id="everything-container">
      <div id="about">
        {{{about}}}
      </div>
      {{#has_answers}}
        <div id="organisations" style="flex: 1">
          <h3>Questions by Community Group</h3>
          {{#organisations}}
          <a href="#{{title}}" style="text-decoration: none;"><div class="organisations-name">{{title}}</div></a>
          {{/organisations}}
        </div>
        <div id="sections_with_buttons" style="display: flex; flex-direction: row; justify-content: space-between">
          <div class="section_button" id="section_button_left" style="margin-right: 5px;"><div style="padding: 20px; padding-top: 80px"><</div></div>
          <div id="sections" style="width: 90%; min-height: 600px;">
            {{#sections}}
              {{#title}}
                <div class="section{{#active}} active{{/active}}">
                  <div id="{{title}}" style="font-size: 25px; color: #833; margin-top: 20px;">{{title}}</div>
                  <div style="color: #833">{{{blurb}}}</div>
                </div>
              {{/title}}
              {{#question}}
                <div class="section">
                  <div id="{{organisation_title}}" style="font-size: 25px; color: #833; margin-top: 20px;">{{organisation_title}}</div>
                  <div><i>{{{text}}}</i></div>
                  <div class="answer">
                    {{{answer}}}
                  </div>
                </div>
              {{/question}}
            {{/sections}}
          </div>
          <div class="section_button" id="section_button_right" style="margin-left: 5px;"><div style="padding: 20px; padding-top: 80px">></div></div>
        </div>
        <!--
        <div id="questions-container" style="flex: 2">
          {{#organisations}}
            <br>
            <div id="{{title}}" style="font-size: 25px; color: #833; margin-top: 20px;">{{title}}</div>
            <div style="margin: 20px; margin-right: 0px; border-style: solid; border-width: 0; border-left-width: 1px; border-color: #888;
                        padding-left: 14px; padding-top: 0; padding-bottom: 0;">{{{blurb}}}</div>
            {{#questions}}
              <div style="margin-left: 18px;"><i>{{{text}}}</i></div>
              <div class="answer">
                {{{answer}}}
              </div>
              <hr size="1" align="left" width="30%" style="margin: 20px; margin-left: 50px;">
            {{/questions}}
          {{/organisations}}
        </div>
        -->
      {{/has_answers}}
    </div>
  </body>
</html>
